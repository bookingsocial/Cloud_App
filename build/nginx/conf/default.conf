server {
    listen   80;
    server_name bkslcloud3140.cloudapp.net www.bkslcloud3140.cloudapp.net;

    root   /var/www;
    index  index.php;
    error_log log/error.log;

    # set expiration of assets to MAX for caching
    location ~* .(ico|css|js|gif|jpe?g|png)(?[0-9]+)?$ {
           expires max;
           log_not_found off;
    }

    # main codeigniter rewrite rule
    location / {
        try_files $uri $uri/ /index.php;
    }
        
	# php parsing 
	location ~ .php$ {
		root           /var/www;
		try_files $uri =404;
		fastcgi_pass   phpfpm:9000;
		fastcgi_index  index.php;
		fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
		include        fastcgi_params;
		fastcgi_buffer_size 128k;
		fastcgi_buffers 256 4k;
		fastcgi_busy_buffers_size 256k;
		fastcgi_temp_file_write_size 256k;
	}

}
